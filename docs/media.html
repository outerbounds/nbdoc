---

title: Convert HTML and Images to MDX


keywords: fastai
sidebar: home_sidebar

summary: "Make allowances for plots and dataframes in MDX"
description: "Make allowances for plots and dataframes in MDX"
nb_path: "nbs/media.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/media.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="HTMLdf" class="doc_header"><code>class</code> <code>HTMLdf</code><a href="https://github.com/outerbounds/nbdoc/tree/master/nbdoc/media.py#L11" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>HTMLdf</code>(<strong><code>convert_charrefs</code></strong>=<em><code>True</code></em>) :: <code>HTMLParser</code></p>
</blockquote>
<p>HTML Parser that finds a dataframe.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">_test_html</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;div&gt;</span>
<span class="s2">&lt;style scoped&gt;</span>
<span class="s2">    .dataframe tbody tr th:only-of-type {</span>
<span class="s2">        vertical-align: middle;</span>
<span class="s2">    }</span>

<span class="s2">    .dataframe tbody tr th {</span>
<span class="s2">        vertical-align: top;</span>
<span class="s2">    }</span>

<span class="s2">    .dataframe thead th {</span>
<span class="s2">        text-align: right;</span>
<span class="s2">    }</span>
<span class="s2">&lt;/style&gt;&quot;&quot;&quot;</span>

<span class="k">assert</span> <span class="n">HTMLdf</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">_test_html</span><span class="p">)</span>
<span class="k">assert</span> <span class="ow">not</span> <span class="n">HTMLdf</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;&lt;div&gt;&lt;/div&gt;&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="HTMLEscape" class="doc_header"><code>class</code> <code>HTMLEscape</code><a href="https://github.com/outerbounds/nbdoc/tree/master/nbdoc/media.py#L35" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>HTMLEscape</code>(<strong>*<code>args</code></strong>:<code>Any</code>, <strong>**<code>kwargs</code></strong>:<code>Any</code>) :: <code>Preprocessor</code></p>
</blockquote>
<p>Place HTML in a codeblock and surround it with a <HTMLOutputBlock> component.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>By default, HTML is incompatible with MDX.  We place HTML in a code block and wrap it with the a custom component so that the static site generator can render it.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">c</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">run_preprocessor</span><span class="p">([</span><span class="n">HTMLEscape</span><span class="p">],</span> <span class="s1">&#39;test_files/pandas.ipynb&#39;</span><span class="p">,</span> <span class="n">display_results</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">assert</span> <span class="s1">&#39;&lt;HTMLOutputBlock&#39;</span> <span class="ow">in</span> <span class="n">c</span> <span class="ow">and</span> <span class="s1">&#39;&lt;/HTMLOutputBlock&gt;&#39;</span> <span class="ow">in</span> <span class="n">c</span> <span class="ow">and</span> <span class="s1">&#39;center&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">c</span>
<span class="k">assert</span> <span class="s1">&#39;```html</span><span class="se">\n</span><span class="s1">&lt;div&gt;&#39;</span> <span class="ow">in</span> <span class="n">c</span> <span class="ow">and</span> <span class="s1">&#39;&lt;/div&gt;</span><span class="se">\n</span><span class="s1">```&#39;</span> <span class="ow">in</span> <span class="n">c</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>```python
import pandas as pd
pd.read_csv(&#39;https://github.com/outerbounds/.data/raw/main/hospital_readmission.csv&#39;).head().iloc[:, :15]
```
    
&lt;HTMLOutputBlock &gt;




```html
&lt;div&gt;
&lt;style scoped&gt;
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
&lt;/style&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;time_in_hospital&lt;/th&gt;
      &lt;th&gt;num_lab_procedures&lt;/th&gt;
      &lt;th&gt;num_procedures&lt;/th&gt;
      &lt;th&gt;num_medications&lt;/th&gt;
      &lt;th&gt;number_outpatient&lt;/th&gt;
      &lt;th&gt;number_emergency&lt;/th&gt;
      &lt;th&gt;number_inpatient&lt;/th&gt;
      &lt;th&gt;number_diagnoses&lt;/th&gt;
      &lt;th&gt;race_Caucasian&lt;/th&gt;
      &lt;th&gt;race_AfricanAmerican&lt;/th&gt;
      &lt;th&gt;gender_Female&lt;/th&gt;
      &lt;th&gt;age_[70-80)&lt;/th&gt;
      &lt;th&gt;age_[60-70)&lt;/th&gt;
      &lt;th&gt;age_[50-60)&lt;/th&gt;
      &lt;th&gt;age_[80-90)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;14&lt;/td&gt;
      &lt;td&gt;41&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;11&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;6&lt;/td&gt;
      &lt;td&gt;True&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
      &lt;td&gt;True&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;30&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;12&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;9&lt;/td&gt;
      &lt;td&gt;True&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
      &lt;td&gt;True&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
      &lt;td&gt;True&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;66&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;22&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;9&lt;/td&gt;
      &lt;td&gt;True&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
      &lt;td&gt;True&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
      &lt;td&gt;True&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;63&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;True&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
      &lt;td&gt;True&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
      &lt;td&gt;True&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;40&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;6&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;9&lt;/td&gt;
      &lt;td&gt;True&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
      &lt;td&gt;True&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
      &lt;td&gt;False&lt;/td&gt;
      &lt;td&gt;True&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
```



&lt;/HTMLOutputBlock&gt;

</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ImageSave" class="doc_header"><code>class</code> <code>ImageSave</code><a href="https://github.com/outerbounds/nbdoc/tree/master/nbdoc/media.py#L51" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ImageSave</code>(<strong>*<code>args</code></strong>:<code>Any</code>, <strong>**<code>kwargs</code></strong>:<code>Any</code>) :: <code>Preprocessor</code></p>
</blockquote>
<p>Saves images stored as bytes in notebooks to disk.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ImagePath" class="doc_header"><code>class</code> <code>ImagePath</code><a href="https://github.com/outerbounds/nbdoc/tree/master/nbdoc/media.py#L67" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ImagePath</code>(<strong>*<code>args</code></strong>:<code>Any</code>, <strong>**<code>kwargs</code></strong>:<code>Any</code>) :: <code>Preprocessor</code></p>
</blockquote>
<p>Changes the image path to the location where <a href="/nbdoc/media.html#ImageSave"><code>ImageSave</code></a> saved the files.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="/nbdoc/media.html#ImageSave"><code>ImageSave</code></a> and <a href="/nbdoc/media.html#ImagePath"><code>ImagePath</code></a> must be used together to extract and save images from notebooks and change the path.  This is necessary to enable compatiblity with certain types of plotting libraries like matplotlib.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">c</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">run_preprocessor</span><span class="p">([</span><span class="n">ImageSave</span><span class="p">,</span> <span class="n">ImagePath</span><span class="p">],</span> <span class="s1">&#39;test_files/matplotlib.ipynb&#39;</span><span class="p">,</span> <span class="n">display_results</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">assert</span> <span class="s1">&#39;![png](_matplotlib_files/output_0_1.png)&#39;</span> <span class="ow">in</span> <span class="n">c</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>```python
from matplotlib import pyplot as plt
plt.plot(range(20), range(20))
plt.plot(range(10), range(10))
```

&lt;CodeOutputBlock lang=&#34;python&#34;&gt;




    [&lt;matplotlib.lines.Line2D at 0x7f9d6922faf0&gt;]




    
![png](_matplotlib_files/output_0_1.png)
    


&lt;/CodeOutputBlock&gt;

</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">c</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">run_preprocessor</span><span class="p">([</span><span class="n">ImageSave</span><span class="p">,</span> <span class="n">ImagePath</span><span class="p">],</span> <span class="s1">&#39;test_files/altair_jpeg.ipynb&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="s1">&#39;![svg](_altair_jpeg_files/output_0_0.svg&#39;</span> <span class="ow">in</span> <span class="n">c</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>


